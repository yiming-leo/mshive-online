"use strict";(self["webpackChunkmshive_online"]=self["webpackChunkmshive_online"]||[]).push([[192],{7192:function(e,t,s){s.r(t),s.d(t,{default:function(){return re}});var i=s(998),o=s(7394),r=s(3059),n=function(){var e=this,t=e._self._c;return t(i.Z,[t(r.Z,{staticClass:"backgroundImg"},[t(o.Fx,[e.loginFormVisible?t("LoginForm"):e._e(),e.registerFormVisible?t("RegisterForm"):e._e()],1)],1)],1)},a=[],l=s(4562),c=s(9582),h=s(4886),u=s(266),d=s(2118),p=s(9223),m=s(4324),f=s(2933),g=s(3305),b=s(1713),v=s(9481),k=s(9258),w=s(3687),y=s(7808),C=s(2082),Z=function(){var e=this,t=e._self._c;return t(d.Z,{staticClass:"d-flex justify-center fill-height",attrs:{app:"",fluid:""}},[t(b.Z,{staticClass:"fill-height",attrs:{justify:"center",align:"center"}},[t(c.Z,{ref:"form",attrs:{width:"600",disabled:e.loading}},[t(f.Z,{attrs:{absolute:"",value:e.loading}},[t(g.Z,{attrs:{indeterminate:"",color:"primary"}})],1),t(h.EB,[e._v("Login")]),t(h.Qq,[e._v("Login Your Personal Account")]),t(h.ZB,[t(b.Z,[t(u.Z,{attrs:{cols:"12"}},[t(v.Z,{attrs:{items:e.loginSelection,label:"Login Selection",outlined:""},model:{value:e.defaultLoginSelection,callback:function(t){e.defaultLoginSelection=t},expression:"defaultLoginSelection"}}),"Email"===e.defaultLoginSelection?t(y.Z,{ref:"email",attrs:{rules:[()=>!!e.email||"This field is required",e.emailCheck],clearable:"","prepend-icon":"mdi-email","append-icon":"mdi-send",type:"email",label:"Email",placeholder:"abcd@ef.com",required:""},on:{"click:append":e.sendOPTtoUser},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}):e._e(),"Telephone"===e.defaultLoginSelection?t(y.Z,{ref:"telephone",attrs:{rules:[()=>!!e.telephone||"This field is required",e.telephoneCheck],clearable:"","prepend-icon":"mdi-phone","append-icon":"mdi-send",type:"telephone",label:"Telephone",placeholder:"12345678901",required:""},on:{"click:append":e.sendOPTtoUser},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}}):e._e(),t(y.Z,{ref:"password",attrs:{clearable:"",rules:[()=>!!e.password||"This field is required",e.passwordCheck],"prepend-icon":"mdi-key","append-icon":e.showPwd?"mdi-eye":"mdi-eye-off",type:e.showPwd?"text":"password",label:"Password",placeholder:"password",required:""},on:{"click:append":function(t){e.showPwd=!e.showPwd}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("OPTInput",{ref:"otp_bar"})],1)],1)],1),t(p.Z,{staticClass:"mt-12"}),t(h.h7,[t(l.Z,{staticClass:"font-weight-bold",attrs:{text:"",color:"vue_theme"},on:{click:e.setRegisterFormVisible}},[e._v("Register Now")]),t(w.Z),t(o.Zy,[e.formHasErrors?t(C.Z,{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t(l.Z,e._g(e._b({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},"v-btn",i,!1),s),[t(m.Z,[e._v("mdi-refresh")])],1)]}}],null,!1,522373079)},[t("span",[e._v("Refresh form")])]):e._e()],1),t(l.Z,{staticClass:"font-weight-bold",attrs:{color:"primary",text:""},on:{click:e.submit}},[e._v("Login")])],1),t(k.Z,{attrs:{light:"",top:""},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(l.Z,e._b({attrs:{color:"pink",text:""},on:{click:function(t){e.optSnackbar=!1}}},"v-btn",s,!1),[e._v("Close")])]}}]),model:{value:e.optSnackbar,callback:function(t){e.optSnackbar=t},expression:"optSnackbar"}},[t("div",{staticClass:"text-body-1"},[e._v(" OTP has sent to your email/phone, please check it. ")]),t("div",{staticClass:"text--caption"},[e._v("Type or copy/paste.")])])],1)],1)],1)},_=[],F=(s(7658),s(2838),s(573)),x=s(7069),T=s(5352),P=s(4101),S=s(7678);const E=(0,S.Z)(F.Z);var $=E.extend().extend({name:"v-otp-input",directives:{ripple:x.Z},inheritAttrs:!1,props:{length:{type:[Number,String],default:6},type:{type:String,default:"text"},plain:Boolean},data:()=>({initialValue:null,isBooted:!1,otp:[]}),computed:{outlined(){return!this.plain},classes(){return{...F.Z.options.computed.classes.call(this),...y.Z.options.computed.classes.call(this),"v-otp-input--plain":this.plain}}},watch:{isFocused:"updateValue",value(e){this.lazyValue=e,this.otp=(null===e||void 0===e?void 0:e.split(""))||[]}},created(){var e;this.$attrs.hasOwnProperty("browser-autocomplete")&&(0,P.fK)("browser-autocomplete","autocomplete",this),this.otp=(null===(e=this.internalValue)||void 0===e?void 0:e.split(""))||[]},mounted(){requestAnimationFrame((()=>this.isBooted=!0))},methods:{focus(e,t){this.onFocus(e,t||0)},genInputSlot(e){return this.$createElement("div",this.setBackgroundColor(this.backgroundColor,{staticClass:"v-input__slot",style:{height:(0,T.kb)(this.height)},on:{click:()=>this.onClick(e),mousedown:t=>this.onMouseDown(t,e),mouseup:t=>this.onMouseUp(t,e)}}),[this.genDefaultSlot(e)])},genControl(e){return this.$createElement("div",{staticClass:"v-input__control"},[this.genInputSlot(e)])},genDefaultSlot(e){return[this.genFieldset(),this.genTextFieldSlot(e)]},genContent(){return Array.from({length:+this.length},((e,t)=>this.$createElement("div",this.setTextColor(this.validationState,{staticClass:"v-input",class:this.classes}),[this.genControl(t)])))},genFieldset(){return this.$createElement("fieldset",{attrs:{"aria-hidden":!0}},[this.genLegend()])},genLegend(){const e=this.$createElement("span",{domProps:{innerHTML:"&#8203;"}});return this.$createElement("legend",{style:{width:"0px"}},[e])},genInput(e){const t=Object.assign({},this.listeners$);return delete t.change,this.$createElement("input",{style:{},domProps:{value:this.otp[e],min:"number"===this.type?0:null},attrs:{...this.attrs$,autocomplete:"one-time-code",disabled:this.isDisabled,readonly:this.isReadonly,type:this.type,id:`${this.computedId}--${e}`,class:`otp-field-box--${e}`},on:Object.assign(t,{blur:this.onBlur,input:t=>this.onInput(t,e),focus:t=>this.onFocus(t,e),keydown:this.onKeyDown,keyup:t=>this.onKeyUp(t,e)}),ref:"input",refInFor:!0})},genTextFieldSlot(e){return this.$createElement("div",{staticClass:"v-text-field__slot"},[this.genInput(e)])},onBlur(e){this.isFocused=!1,e&&this.$nextTick((()=>this.$emit("blur",e)))},onClick(e){this.isFocused||this.isDisabled||!this.$refs.input[e]||this.onFocus(void 0,e)},onFocus(e,t){null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation();const s=this.$refs.input,i=this.$refs.input&&s[t||0];if(i)return document.activeElement!==i?(i.focus(),i.select()):void(this.isFocused||(this.isFocused=!0,i.select(),e&&this.$emit("focus",e)))},onInput(e,t){const s=+this.length-1,i=e.target,o=i.value,r=(null===o||void 0===o?void 0:o.split(""))||[],n=[...this.otp];for(let a=0;a<r.length;a++){const e=t+a;if(e>s)break;n[e]=r[a].toString()}r.length||n.splice(t,1),this.otp=n,this.internalValue=this.otp.join(""),t+r.length>=+this.length?(this.onCompleted(),this.clearFocus(t)):r.length&&this.changeFocus(t+r.length)},clearFocus(e){const t=this.$refs.input[e];t.blur()},onKeyDown(e){e.keyCode===T.keyCodes.enter&&this.$emit("change",this.internalValue),this.$emit("keydown",e)},onMouseDown(e,t){e.target!==this.$refs.input[t]&&(e.preventDefault(),e.stopPropagation()),F.Z.options.methods.onMouseDown.call(this,e)},onMouseUp(e,t){this.hasMouseDown&&this.focus(e,t),F.Z.options.methods.onMouseUp.call(this,e)},changeFocus(e){this.onFocus(void 0,e||0)},updateValue(e){this.hasColor=e,e?this.initialValue=this.lazyValue:this.initialValue!==this.lazyValue&&this.$emit("change",this.lazyValue)},onKeyUp(e,t){e.preventDefault();const s=e.key;if(!["Tab","Shift","Meta","Control","Alt"].includes(s)&&!["Delete"].includes(s))return"ArrowLeft"===s||"Backspace"===s&&!this.otp[t]?t>0&&this.changeFocus(t-1):"ArrowRight"===s?t+1<+this.length&&this.changeFocus(t+1):void 0},onCompleted(){const e=this.otp.join("");e.length===+this.length&&this.$emit("finish",e)}},render(e){return e("div",{staticClass:"v-otp-input",class:this.themeClasses},this.genContent())}}),A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-2"},[t("div",{staticClass:"ma-auto position-relative",staticStyle:{"max-width":"500px"}},[t($,{attrs:{disabled:e.loading},on:{finish:e.onFinish}}),t(f.Z,{attrs:{absolute:"",value:e.loading}},[t(g.Z,{attrs:{indeterminate:"",color:"primary"}})],1)],1),t(k.Z,{attrs:{color:e.snackbarColor,timeout:2e3,top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.text)+" ")])],1)},q=[],O=s(1120),M=s(4881);function V(e){return M.Z.get("/otp/send_email/",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},params:{email_address:e}})}function L(e,t){return M.Z.get("/otp/validate_email/",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},params:{otp_code:t,email_addr:e}})}var I={name:"OPTInput",data:()=>({loading:!1,snackbar:!1,snackbarColor:"default",text:"",email_addr:""}),methods:{async onFinish(e){this.loading=!0,await setTimeout((()=>{this.loading=!1,L(this.email_addr,e).then((e=>{console.log("validateOTPEmail"),console.log(e),200==e.data.status&&e?this.snackbarColor="success":this.snackbarColor="warning",this.text=e.data.msg,this.snackbar=!0}))}),2e3)}}},H=I,D=s(1001),R=(0,D.Z)(H,A,q,!1,null,"1ef466b9",null),j=R.exports,B=s(629),U={name:"LoginForm",components:{OPTInput:j},data:()=>({optSnackbar:!1,showPwd:!1,loading:!1,defaultLoginSelection:"Email",loginSelection:["Email","Telephone"],errorMessages:"",email:null,telephone:null,password:null,formHasErrors:!1}),computed:{form(){return{email:this.email,telephone:this.telephone,password:this.password}}},watch:{name(){this.errorMessages=""}},methods:{...(0,B.OI)(["setRegisterFormVisible"]),emailCheck(){return this.errorMessages=this.email?"Hey! I'm required":"",!0},telephoneCheck(){return this.errorMessages=this.telephone?"Hey! I'm required":"",!0},passwordCheck(){return this.errorMessages=this.password?"Hey! I'm required":"",!0},resetForm(){this.errorMessages=[],this.formHasErrors=!1,Object.keys(this.form).forEach((e=>{this.$refs[e].reset()}))},async sendOPTtoUser(){!0===this.emailCheck()&&this.telephoneCheck()&&this.passwordCheck()&&(this.optSnackbar=!0,this.$refs.otp_bar.email_addr=this.email,await V(this.email).then((e=>{console.log("sendOTPEmail"),console.log(e),200==e.data.status&&e?this.snackbarColor="success":this.snackbarColor="warning",this.text=e.data.msg,this.snackbar=!0})))},submit(){this.formHasErrors=!1,this.loading=!0,setTimeout((()=>{this.formHasErrors=!1,O.Z.push("/")}),1500)}}},K=U,z=(0,D.Z)(K,Z,_,!1,null,"134f028d",null),N=z.exports,Q=s(344),W=function(){var e=this,t=e._self._c;return t(d.Z,{staticClass:"d-flex justify-center fill-height",attrs:{app:"",fluid:""}},[t(b.Z,{staticClass:"fill-height",attrs:{justify:"center",align:"center"}},[t(c.Z,{ref:"form",attrs:{width:"800"}},[t(h.EB,[e._v("Register")]),t(h.Qq,[e._v("Create Your Personal Account")]),t(h.ZB,[t(b.Z,[t(u.Z,{attrs:{cols:"6"}},[t(y.Z,{ref:"username",attrs:{"error-messages":e.errorMessages,type:"username","prepend-icon":"mdi-account",label:"Full Name",placeholder:"John Doe",counter:"25",required:"",rules:[()=>!!e.username||"This field is required",()=>!!e.username&&e.username.length<=25||"Username must be less than 25 characters"]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t(y.Z,{ref:"email",attrs:{rules:[()=>!!e.email||"This field is required",e.emailCheck],"prepend-icon":"mdi-email",type:"email",label:"Email",placeholder:"abcd@ef.com",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(y.Z,{ref:"password",attrs:{type:"password",label:"Password",required:"",placeholder:"123456","prepend-icon":"mdi-key",rules:[()=>!!e.password||"This field is required"]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(y.Z,{ref:"checkPassword",attrs:{type:"checkPassword",label:"Check Password",required:"",placeholder:"123456","prepend-icon":"mdi-check-all",rules:[()=>!!e.checkPassword||"This field is required"]},model:{value:e.checkPassword,callback:function(t){e.checkPassword=t},expression:"checkPassword"}}),t(y.Z,{ref:"telephone",attrs:{type:"telephone",label:"Telephone",required:"",placeholder:"12345678901","prepend-icon":"mdi-phone",rules:[()=>!!e.telephone||"This field is required"]},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}}),t(Q.Z,{ref:"continent",attrs:{rules:[()=>!!e.continent||"This field is required"],"prepend-icon":"mdi-earth",items:e.continents,label:"Continent",placeholder:"Select...",required:""},model:{value:e.continent,callback:function(t){e.continent=t},expression:"continent"}})],1),t(u.Z,{attrs:{cols:"6"}},[t("AvatarUploader")],1)],1)],1),t(p.Z,{staticClass:"mt-12"}),t(h.h7,[t(l.Z,{staticClass:"font-weight-bold",attrs:{text:"",color:"vue_theme"},on:{click:e.setLoginFormVisible}},[e._v("Turn To Login")]),t(w.Z),t(o.Zy,[e.formHasErrors?t(C.Z,{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t(l.Z,e._g(e._b({staticClass:"my-0",attrs:{icon:""},on:{click:e.resetForm}},"v-btn",i,!1),s),[t(m.Z,[e._v("mdi-refresh")])],1)]}}],null,!1,522373079)},[t("span",[e._v("Refresh form")])]):e._e()],1),t(l.Z,{staticClass:"font-weight-bold",attrs:{color:"primary",text:""},on:{click:e.submit}},[e._v("Submit")])],1)],1)],1)],1)},X=[],Y=s(2797),J={name:"RegisterForm",components:{AvatarUploader:Y.Z},data:()=>({continents:["Asia","Europe","Africa","North America","South America","Oceania","Antarctica"],continent:null,errorMessages:"",username:null,email:null,telephone:null,password:null,checkPassword:null,avatar:null,formHasErrors:!1}),computed:{form(){return{username:this.name,email:this.email,telephone:this.telephone,password:this.password,checkPassword:this.checkPassword,continent:this.continent,avatar:this.avatar}}},watch:{name(){this.errorMessages=""}},methods:{...(0,B.OI)(["setLoginFormVisible"]),emailCheck(){return this.errorMessages=this.email&&!this.username?"Hey! I'm required":"",!0},resetForm(){this.errorMessages=[],this.formHasErrors=!1,Object.keys(this.form).forEach((e=>{this.$refs[e].reset()}))},submit(){this.formHasErrors=!1,Object.keys(this.form).forEach((e=>{this.form[e]||(this.formHasErrors=!0),this.$refs[e].validate(!0)}))}}},G=J,ee=(0,D.Z)(G,W,X,!1,null,"aaa49142",null),te=ee.exports,se={name:"Account",components:{LoginForm:N,RegisterForm:te},data:()=>({}),computed:{registerFormVisible(){return this.$store.state.components.registerForm},loginFormVisible(){return this.$store.state.components.loginForm}},watch:{},methods:{...(0,B.OI)(["setRegisterFormVisible","setLoginFormVisible"])}},ie=se,oe=(0,D.Z)(ie,n,a,!1,null,null,null),re=oe.exports}}]);
//# sourceMappingURL=192.a50af87a.js.map